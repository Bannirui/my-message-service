<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.github.bannirui.mms.dal.mapper.ServerMapper">

    <select id="serverExtByServerType" resultType="com.github.bannirui.mms.dal.model.EnvHostServerExt">
        select
        server.id as serverId,
        server.name as serverName,
        server.port as serverPort,
        host.id as hostId,
        host.name as hostName,
        host.host as hostHost,
        env.id as envId,
        env.name as envName
        from
        server
        left join host on server.host_id=host.id
        left join env on host.env_id=env.id
        where server.status=2 and server.type=#{serverType}
    </select>
</mapper>